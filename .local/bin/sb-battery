#!/bin/sh
#Prints battery percentage

_openbsd() {
	PERCENT="$(apm | grep -o '[0-9].*%')"
	[ "$PERCENT" = "" ] && printf "None" && exit
	echo "$PERCENT"
}

_linux() {
	[ -f /sys/class/power_supply/BAT* ] || exit
	for battery in /sys/class/power_supply/BAT?*; do
	[ -n "${capacity+x}" ] && printf " "
	capacity="$(cat "$battery/capacity" 2>&1)"
	printf "%s%s%d%%" "$status" "$warn" "$capacity"; unset warn
done && printf "\\n"
}

case $(uname) in
	Linux) _linux "$@" ;;
	OpenBSD) _openbsd "$@" ;;
esac
